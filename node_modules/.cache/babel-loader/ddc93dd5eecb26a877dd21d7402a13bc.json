{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\HSE-KMS\\\\Documents\\\\Temp\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\HSE-KMS\\\\Documents\\\\Temp\\\\frontend\\\\src\\\\pages\\\\layout\\\\MainLayout.js\";\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react';\nimport useStores from '@stores/useStores';\nimport { useObserver } from 'mobx-react-lite';\nimport { Route, withRouter, Redirect, Switch } from 'react-router-dom'; // import Interceptor from '@components/common/Interceptor';\n\nimport Loading from '@components/common/Loading';\nimport Header from '@components/layout/Header';\nimport Alert from '@components/common/Alert';\nimport Confirm from '@components/common/Confirm';\nimport Box from '@material-ui/core/Box';\nimport Interceptor from '@components/common/Interceptor';\nimport Popup from 'components/common/Popup';\n\nvar MainLayout = function MainLayout(_ref) {\n  var location = _ref.location,\n      history = _ref.history;\n\n  var _useStores = useStores(),\n      commonStore = _useStores.commonStore,\n      userStore = _useStores.userStore,\n      routeStore = _useStores.routeStore;\n\n  var _useObserver = useObserver(function () {\n    return {\n      $Loading: commonStore.Loading,\n      $Alert: commonStore.Alert,\n      $setAlert: commonStore.fSetAlert,\n      $Confirm: commonStore.Confirm,\n      $setConfirm: commonStore.fSetConfirm,\n      $ConfirmFunc: commonStore.ConfirmFunc,\n      $Popup: commonStore.fSetPopup,\n      $user: userStore.user,\n      $routes: routeStore.routes\n    };\n  }),\n      $Loading = _useObserver.$Loading,\n      $Alert = _useObserver.$Alert,\n      $Popup = _useObserver.$Popup,\n      $setAlert = _useObserver.$setAlert,\n      $Confirm = _useObserver.$Confirm,\n      $setConfirm = _useObserver.$setConfirm,\n      $ConfirmFunc = _useObserver.$ConfirmFunc,\n      $user = _useObserver.$user,\n      $routes = _useObserver.$routes;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      view = _useState2[0],\n      setView = _useState2[1];\n\n  useEffect(function () {\n    if (!$user || !$user.userid && location.pathname !== '/login') {\n      history.push('/login');\n    }\n\n    if ($user) {\n      setView(true);\n    }\n  }, [$user, location]);\n  return React.createElement(React.Fragment, null, React.createElement(Interceptor, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }), React.createElement(Alert, {\n    visible: $Alert.visible,\n    description: $Alert.desc,\n    ononCfirm: function ononCfirm() {\n      return $setAlert({\n        visible: false\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }), React.createElement(Confirm, {\n    visible: $Confirm.visible,\n    description: $Confirm.desc,\n    onCancel: function onCancel() {\n      return $setConfirm({\n        visible: false\n      });\n    },\n    onConfirm: $ConfirmFunc,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }), React.createElement(Popup, {\n    visible: $Popup.visible,\n    description: $Popup.desc,\n    ononCfirm: function ononCfirm() {\n      return $setPopup({\n        visible: false\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }), view && React.createElement(Box, {\n    className: \"LayMain\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(Loading, {\n    isActive: $Loading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }), React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }), React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, $routes.map(function (route, index) {\n    return React.createElement(Route, {\n      key: index,\n      path: route.path,\n      exact: route.exact,\n      component: route.component,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    });\n  }), React.createElement(Route, {\n    render: function render() {\n      return React.createElement(Redirect, {\n        to: \"/error_404\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  })))));\n};\n\nexport default withRouter(MainLayout);","map":{"version":3,"sources":["C:\\Users\\HSE-KMS\\Documents\\Temp\\frontend\\src\\pages\\layout\\MainLayout.js"],"names":["React","useEffect","useState","useStores","useObserver","Route","withRouter","Redirect","Switch","Loading","Header","Alert","Confirm","Box","Interceptor","Popup","MainLayout","location","history","commonStore","userStore","routeStore","$Loading","$Alert","$setAlert","fSetAlert","$Confirm","$setConfirm","fSetConfirm","$ConfirmFunc","ConfirmFunc","$Popup","fSetPopup","$user","user","$routes","routes","view","setView","userid","pathname","push","visible","desc","$setPopup","map","route","index","path","exact","component"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react';\nimport useStores from '@stores/useStores';\nimport { useObserver } from 'mobx-react-lite';\nimport { Route, withRouter, Redirect, Switch } from 'react-router-dom';\n// import Interceptor from '@components/common/Interceptor';\nimport Loading from '@components/common/Loading';\nimport Header from '@components/layout/Header';\nimport Alert from '@components/common/Alert';\nimport Confirm from '@components/common/Confirm';\nimport Box from '@material-ui/core/Box';\nimport Interceptor from '@components/common/Interceptor';\nimport Popup from 'components/common/Popup';\n\nconst MainLayout = ({ location, history }) => {\n  const { commonStore, userStore, routeStore } = useStores();\n  const { $Loading, $Alert,$Popup, $setAlert, $Confirm, $setConfirm, $ConfirmFunc, $user, $routes } = useObserver(() => ({\n    $Loading: commonStore.Loading,\n    $Alert: commonStore.Alert,\n    $setAlert: commonStore.fSetAlert,\n    $Confirm: commonStore.Confirm,\n    $setConfirm: commonStore.fSetConfirm,\n    $ConfirmFunc: commonStore.ConfirmFunc,\n    $Popup: commonStore.fSetPopup,\n    $user: userStore.user,\n    $routes: routeStore.routes,\n  }));\n  const [view, setView] = useState(false);\n\n  useEffect(() => {\n    if (!$user || (!$user.userid && location.pathname !== '/login')) {\n      history.push('/login');\n    }\n    if ($user) {\n      setView(true);\n    }\n  }, [$user, location]);\n\n  return (\n    <>\n      <Interceptor />\n      <Alert visible={$Alert.visible} description={$Alert.desc} ononCfirm={() => $setAlert({ visible: false })} />\n      <Confirm visible={$Confirm.visible} description={$Confirm.desc} onCancel={() => $setConfirm({ visible: false })} onConfirm={$ConfirmFunc} />\n      <Popup visible={$Popup.visible} description={$Popup.desc} ononCfirm={() => $setPopup({ visible: false })} />\n      {view && (\n        <Box className=\"LayMain\">\n          <Loading isActive={$Loading} />\n          <Header />\n\n          <Box display=\"flex\" flexDirection=\"row\">\n            <Switch>\n              {$routes.map((route, index) => (\n                <Route key={index} path={route.path} exact={route.exact} component={route.component} />\n              ))}\n              <Route render={() => <Redirect to=\"/error_404\" />} />\n            </Switch>\n          </Box>\n        </Box>\n      )}\n    </>\n  );\n};\nexport default withRouter(MainLayout);\n"]},"metadata":{},"sourceType":"module"}