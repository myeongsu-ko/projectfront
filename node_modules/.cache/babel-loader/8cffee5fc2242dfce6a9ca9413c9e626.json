{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\HSE-KMS\\\\Documents\\\\Temp\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\HSE-KMS\\\\Documents\\\\Temp\\\\frontend\\\\src\\\\pages\\\\layout\\\\MainLayout.js\";\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react';\nimport useStores from '@stores/useStores';\nimport { useObserver } from 'mobx-react-lite';\nimport { Route, withRouter, Redirect, Switch } from 'react-router-dom'; // import Interceptor from '@components/common/Interceptor';\n\nimport Loading from '@components/common/Loading';\nimport Header from '@components/layout/Header';\nimport Alert from '@components/common/Alert';\nimport Confirm from '@components/common/Confirm';\nimport Box from '@material-ui/core/Box';\nimport Interceptor from '@components/common/Interceptor';\nimport Orderfirm from 'components/common/Orderfirm';\n\nvar MainLayout = function MainLayout(_ref) {\n  var location = _ref.location,\n      history = _ref.history;\n\n  var _useStores = useStores(),\n      commonStore = _useStores.commonStore,\n      userStore = _useStores.userStore,\n      routeStore = _useStores.routeStore;\n\n  var _useObserver = useObserver(function () {\n    return {\n      $Loading: commonStore.Loading,\n      $Alert: commonStore.Alert,\n      $setAlert: commonStore.fSetAlert,\n      $Confirm: commonStore.Confirm,\n      $setConfirm: commonStore.fSetConfirm,\n      $ConfirmFunc: commonStore.ConfirmFunc,\n      $user: userStore.user,\n      $routes: routeStore.routes,\n      $Orderfirm: commonStore.Orderfirm,\n      $setOrder: commonStore.fSetOrderfirm,\n      $OrderfirmFunc: commonStore.fSetOrderfirmFunc\n    };\n  }),\n      $Loading = _useObserver.$Loading,\n      $Alert = _useObserver.$Alert,\n      $setAlert = _useObserver.$setAlert,\n      $Confirm = _useObserver.$Confirm,\n      $setConfirm = _useObserver.$setConfirm,\n      $ConfirmFunc = _useObserver.$ConfirmFunc,\n      $user = _useObserver.$user,\n      $routes = _useObserver.$routes,\n      $Orderfirm = _useObserver.$Orderfirm,\n      $setOrderfrim = _useObserver.$setOrderfrim,\n      $OrderfirmFunc = _useObserver.$OrderfirmFunc;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      view = _useState2[0],\n      setView = _useState2[1];\n\n  useEffect(function () {\n    if (!$user || !$user.userid && location.pathname !== '/login') {\n      history.push('/login');\n    }\n\n    if ($user) {\n      setView(true);\n    }\n  }, [$user, location]);\n  return React.createElement(React.Fragment, null, React.createElement(Interceptor, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }), React.createElement(Alert, {\n    visible: $Alert.visible,\n    description: $Alert.desc,\n    onConfirm: function onConfirm() {\n      return $setAlert({\n        visible: false\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }), React.createElement(Confirm, {\n    visible: $Confirm.visible,\n    description: $Confirm.desc,\n    onCancel: function onCancel() {\n      return $setConfirm({\n        visible: false\n      });\n    },\n    onConfirm: $ConfirmFunc,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }), React.createElement(Orderfirm, {\n    visible: $Orderfirm.visible,\n    description: $Orderfirm.desc,\n    onCancel: function onCancel() {\n      return $setOrderfirm({\n        visible: false\n      });\n    },\n    onConfirm: $OrderfirmFunc,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }), view && React.createElement(Box, {\n    className: \"LayMain\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(Loading, {\n    isActive: $Loading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }), React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }), React.createElement(Box, {\n    display: \"flex\",\n    flexDirection: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, $routes.map(function (route, index) {\n    return React.createElement(Route, {\n      key: index,\n      path: route.path,\n      exact: route.exact,\n      component: route.component,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    });\n  }), React.createElement(Route, {\n    render: function render() {\n      return React.createElement(Redirect, {\n        to: \"/error_404\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  })))));\n};\n\nexport default withRouter(MainLayout);","map":{"version":3,"sources":["C:\\Users\\HSE-KMS\\Documents\\Temp\\frontend\\src\\pages\\layout\\MainLayout.js"],"names":["React","useEffect","useState","useStores","useObserver","Route","withRouter","Redirect","Switch","Loading","Header","Alert","Confirm","Box","Interceptor","Orderfirm","MainLayout","location","history","commonStore","userStore","routeStore","$Loading","$Alert","$setAlert","fSetAlert","$Confirm","$setConfirm","fSetConfirm","$ConfirmFunc","ConfirmFunc","$user","user","$routes","routes","$Orderfirm","$setOrder","fSetOrderfirm","$OrderfirmFunc","fSetOrderfirmFunc","$setOrderfrim","view","setView","userid","pathname","push","visible","desc","$setOrderfirm","map","route","index","path","exact","component"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react';\nimport useStores from '@stores/useStores';\nimport { useObserver } from 'mobx-react-lite';\nimport { Route, withRouter, Redirect, Switch } from 'react-router-dom';\n// import Interceptor from '@components/common/Interceptor';\nimport Loading from '@components/common/Loading';\nimport Header from '@components/layout/Header';\nimport Alert from '@components/common/Alert';\nimport Confirm from '@components/common/Confirm';\nimport Box from '@material-ui/core/Box';\nimport Interceptor from '@components/common/Interceptor';\nimport Orderfirm from 'components/common/Orderfirm';\n\nconst MainLayout = ({ location, history }) => {\n  const { commonStore, userStore, routeStore } = useStores();\n  const { $Loading, $Alert, $setAlert, $Confirm, $setConfirm, $ConfirmFunc, $user, $routes,$Orderfirm, $setOrderfrim, $OrderfirmFunc } = useObserver(() => ({\n    $Loading: commonStore.Loading,\n    $Alert: commonStore.Alert,\n    $setAlert: commonStore.fSetAlert,\n    $Confirm: commonStore.Confirm,\n    $setConfirm: commonStore.fSetConfirm,\n    $ConfirmFunc: commonStore.ConfirmFunc,\n    $user: userStore.user,\n    $routes: routeStore.routes,\n    $Orderfirm: commonStore.Orderfirm,\n    $setOrder: commonStore.fSetOrderfirm,\n    $OrderfirmFunc: commonStore.fSetOrderfirmFunc,\n  }));\n  const [view, setView] = useState(false);\n\n  useEffect(() => {\n    if (!$user || (!$user.userid && location.pathname !== '/login')) {\n      history.push('/login');\n    }\n    if ($user) {\n      setView(true);\n    }\n  }, [$user, location]);\n\n  return (\n    <>\n      <Interceptor />\n      <Alert visible={$Alert.visible} description={$Alert.desc} onConfirm={() => $setAlert({ visible: false })} />\n      <Confirm visible={$Confirm.visible} description={$Confirm.desc} onCancel={() => $setConfirm({ visible: false })} onConfirm={$ConfirmFunc} />\n      <Orderfirm visible={$Orderfirm.visible} description={$Orderfirm.desc} onCancel={()=>$setOrderfirm({visible: false})} onConfirm={$OrderfirmFunc}/>\n      {view && (\n        <Box className=\"LayMain\">\n          <Loading isActive={$Loading} />\n          <Header />\n\n          <Box display=\"flex\" flexDirection=\"row\">\n            <Switch>\n              {$routes.map((route, index) => (\n                <Route key={index} path={route.path} exact={route.exact} component={route.component} />\n              ))}\n              <Route render={() => <Redirect to=\"/error_404\" />} />\n            </Switch>\n          </Box>\n        </Box>\n      )}\n    </>\n  );\n};\nexport default withRouter(MainLayout);\n"]},"metadata":{},"sourceType":"module"}