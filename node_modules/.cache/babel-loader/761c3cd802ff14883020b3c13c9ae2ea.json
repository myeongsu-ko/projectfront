{"ast":null,"code":"var Generator = require('generate-js');\n\nvar SecureStorage = Generator.generate(function SecureStorage(storage, options) {\n  var _ = this;\n\n  _.storage = storage;\n\n  if (options) {\n    _.hash = options.hash;\n    _.encrypt = options.encrypt;\n    _.decrypt = options.decrypt;\n  }\n});\n\nfunction through(data) {\n  return data;\n}\n\nSecureStorage.definePrototype({\n  hash: through,\n  encrypt: through,\n  decrypt: through\n}, {\n  writable: true\n});\nSecureStorage.definePrototype({\n  getItem: function getItem(key) {\n    var _ = this;\n\n    key = _.hash(key);\n\n    var value = _.storage.getItem(key);\n\n    if (typeof value !== 'string') {\n      return value;\n    }\n\n    value = _.decrypt(value);\n    return JSON.parse(value);\n  },\n  setItem: function setItem(key, value) {\n    var _ = this;\n\n    key = _.hash(key);\n    value = JSON.stringify(value);\n    value = _.encrypt(value);\n    return _.storage.setItem(key, value);\n  },\n  removeItem: function removeItem(key) {\n    var _ = this;\n\n    key = _.hash(key);\n    return _.storage.removeItem(key);\n  },\n  clear: function clear() {\n    var _ = this;\n\n    return _.storage.clear();\n  },\n  key: function key(id) {\n    var _ = this;\n\n    return _.storage.key(id);\n  },\n  length: {\n    get: function getLength() {\n      var _ = this;\n\n      return _.storage.length;\n    }\n  }\n});\nmodule.exports = SecureStorage;","map":null,"metadata":{},"sourceType":"script"}